<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Page</title>
    <style>
        body {
            background-image: url('https://i.pinimg.com/736x/ec/88/01/ec88011e4d940a6fbfde37d59b58b85b.jpg');
            background-size: cover;
            font-family: 'Poppins', sans-serif;
            color: #d46a7e;
            margin: 0;
            padding: 20px;
        }
        .container {
            background: #fbf3ed;
            padding: 20px;
            border-radius: 10px;
            max-width: 800px;
            margin: auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            position: relative; 
            /* hy mhemme lal heart, laino iza ma hatyta bisir 
            l position taaulo hasab the whole page msh bs l container */
        }
        .recipe-header {
            text-align: center;
        }
        .recipe-img {
            width: 30%;
            border-radius: 5px;
        }
        .categories {
            text-align: center;
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        .category {
            background: #fbf3ed;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
        }
        .favorite-heart {
            position: absolute; 
            top: 20px;
            right: 20px; 
            font-size: 32px;
            cursor: pointer;
            color: red; 
            transition: color 0.3s;
        }
        .favorite-heart.added {
            color: red; 
        }
        .rating-section, .discussion-section {
            margin-top: 20px;
        }
        .star-rating {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }
        .star {
            cursor: pointer;
            font-size: 24px;
            color: #ccc;
        }
        .star.selected {
            color: #ffcc00;
        }
        .average-rating {
            font-size: 18px;
            margin: 10px 0;
        }
        .discussion-section input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .discussion-section button {
            padding: 10px 20px;
            background: #d46a7e;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .discussion-section button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .warning {
            color: red;
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }

        .user-info img {
    width: 70px; /* Adjust as needed */
    height: 70px;
    border-radius: 50%;
    object-fit: cover;
}

    </style>
</head>
<body>
    <div class="container">
        <div class="favorite-heart" id="favoriteHeart" onclick="toggleFavorite()">
            â™¡ 
        </div>

        <div class="recipe-header">
            <h1>Brookies</h1>
            <img src="C:\Users\USP\OneDrive\Documents\GitHub\webb\brookies.png" alt="Recipe Image" class="recipe-img">
            <div class="categories">
              
                <div class="category">Vegetarian</div>
                <div class="category">Nut-Free</div>
            </div>
        </div>

        <div class="user-info">
            <img src="C:\Users\USP\OneDrive\Documents\GitHub\webb\profilerim.png" alt="User Picture" class="user-pic">
            <p>Posted by: <strong>RimBakesðŸŒº</strong></p>
        </div>

        <p><strong>Description:</strong> These Brookies are rich, fudgy and decadent bars made with half brownie and half chocolate chip cookie. 
            Easy to make with basic pantry ingredients this is the ultimate way to enjoy your two favorite sweet treats in one!</p>
        <p><strong>Prep Time:</strong> 15 min | <strong>Cook Time:</strong> 40 min | <strong>Servings:</strong> 15 | <strong>Difficulty:</strong> Hard</p>
        
        <div class="serving-calculator">
            <label for="servingInput">Adjust servings:</label>
            <input type="number" id="servingInput" value="15" min="1" onchange="adjustIngredients()">
        </div>
        
        <h3>Ingredients for the Cookie Dough</h3>
        <ul id="ingredients-list">
            <li data-quantity="100">100g unsalted butter room temperature </li>
            <li data-quantity="50">100g packed light brown sugar</li>
            <li data-quantity="4">4g vanilla extract</li>
            <li data-quantity="1">1 large egg</li>
            <li data-quantity="3">3g salt</li>
            <li data-quantity="2">2g baking powder</li>
            <li data-quantity="1">1g baking soda</li>
            <li data-quantity="160">160g all-purpose flour</li>
            <li data-quantity="170">170g semi-sweet chocolate chips</li>
        </ul>

        <h3>Ingredients for the Brownie Batter</h3>
        <ul id="ingredients-list">
            <li data-quantity="113">113g unsalted butter melted</li>
            <li data-quantity="100">100g granulated sugar</li>
            <li data-quantity="4">4g vanilla extract</li>
            <li data-quantity="2">2 large egg</li>
            <li data-quantity="3">3g salt</li>
            <li data-quantity="65">65g all-purpose flour</li>
            <li data-quantity="170">170g semi-sweet chocolate chips</li>
            <li data-quantity="100">100g packed light brown sugar</li>
            <li data-quantity="35">35g cocoa powder</li>
            <li data-quantity="128">128g semisweet chocolate chips or roughly chopped chocolate</li>
        </ul>

        <h3>Steps</h3>
        <ol>
            <li>Line a 9x13 baking dish with parchment or foil and heat oven to 350F.</li>
            <li>For the brownies melt butter then stir in cocoa powder. Whisk in both sugar
                 and the salt then add the eggs and vanilla and beat well (secret to glossy 
                 brownies is to beat the eggs and sugar very well.)</li>
            <li>Add the flour and mix until almost combined then fold in the chocolate chips and 
                finish the batter off by hand with a spatula scraping the bowl down and mixing in 
                any errant flour etc.</li>
            <li> 
                Transfer the brownie batter to your prepared pan and spread into a thin layer then set aside.
            </li>

            <li>
              For the cookie dough,Cream the butter, and sugars on high for 3-4 minutes
               or until light and fluffy, scraping the bowl down as needed
            </li>

            <li> Mix in the vanilla and egg and scrape the bowl down once more.</li>

            <li>Add salt baking soda and powder then mix until combined.</li>

            <li> Pour in the flour and mix until almost combined then fold in the 
                chocolate chips, reserving a handful to sprinkle on top later.
                 Finish mixing the batter with your spatula then drop spoonfuls onto the
                  brownie batter. You don't need full coverage, it will be nice to see the 
                  brownie batter peaking through after baking.</li>
            <li> Cover with foil and bake at 350F for 20 min then bake another 20 min uncovered.
                 Allow to cool before removing from pan and cutting.</li>
        </ol>

        <div class="rating-section">
            <h3>Rate this Recipe</h3>
            <div class="star-rating">
                <span class="star" data-value="1">&#9733;</span>
                <span class="star" data-value="2">&#9733;</span>
                <span class="star" data-value="3">&#9733;</span>
                <span class="star" data-value="4">&#9733;</span>
                <span class="star" data-value="5">&#9733;</span>
            </div>
            <div class="warning" id="ratingWarning">Please log in to rate this recipe.</div>
            <div class="average-rating">
                Average Rating: <span id="averageRating">4.5</span>
            </div>
        </div>

    
        <div class="discussion-section">
            <h3>Discussions</h3>
            <input type="text" placeholder="Add a comment..." id="commentInput">
            <button id="submitCommentBtn" onclick="submitComment()">Submit</button>
            <div class="warning" id="commentWarning">Please log in to submit a comment.</div>
            <div id="commentsList">
                
            </div>
        </div>
    </div>

    <script>
        
        const favoriteHeart = document.getElementById('favoriteHeart');

        function toggleFavorite() {
            favoriteHeart.classList.toggle('added');
            if (favoriteHeart.classList.contains('added')) {
                favoriteHeart.innerHTML = 'â¤ï¸'; 
            } else {
                favoriteHeart.innerHTML = 'â™¡'; 
            }
        }

        // Star Rating System
        const stars = document.querySelectorAll('.star');
        const ratingWarning = document.getElementById('ratingWarning');

        stars.forEach(star => {
            star.addEventListener('click', () => {
                ratingWarning.style.display = 'block'; // Show warning
            });
        });

        // Discussion System
        const commentInput = document.getElementById('commentInput');
        const submitCommentBtn = document.getElementById('submitCommentBtn');
        const commentWarning = document.getElementById('commentWarning');

        submitCommentBtn.addEventListener('click', () => {
            commentWarning.style.display = 'block'; 
        });

        // Serving Calculator
        document.addEventListener("DOMContentLoaded", function () {
    const servingInput = document.getElementById("servingInput");
    const defaultServingSize = parseInt(servingInput.value); // Store default serving size

    // Store original ingredient quantities
    const ingredientList = document.querySelectorAll("#ingredients-list li");
    ingredientList.forEach(item => {
        item.dataset.originalQuantity = item.dataset.quantity; // Store original quantity
    });

    function adjustIngredients() {
        let newServingSize = parseInt(servingInput.value);
        if (isNaN(newServingSize) || newServingSize < 1) {
            servingInput.value = defaultServingSize; // Reset to default if invalid input
            return;
        }

        ingredientList.forEach(item => {
            let originalQuantity = parseFloat(item.dataset.originalQuantity);
            let adjustedQuantity = (originalQuantity * newServingSize) / defaultServingSize;
            item.textContent = `${adjustedQuantity.toFixed(1)}g ${item.textContent.split(' ').slice(1).join(' ')}`;
        });
    }

    // Ensure default serving size is correctly set at load
    servingInput.addEventListener("change", adjustIngredients);
});



    </script>
</body>
</html>